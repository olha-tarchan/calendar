(this.webpackJsonpcalendar=this.webpackJsonpcalendar||[]).push([[0],{158:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n(27),o=n.n(c),s=n(26),u=n(292),i=n(84),l=n(83),d=n(293),j=n(294),O=n(296),p=n(56),f=n(87),h=n.n(f),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Fill in the field";return{required:!0,messaga:e}},v=function(e){return{validator:function(t,n){return n.isSameOrAfter(h()())?Promise.resolve():Promise.reject(new Error(e))}}},E=n(79),m=E.c,g=n(82),x=n(19),S=n(28),y=n.n(S),_=n(48);!function(e){e.SET_AUTH="SET_AUTH",e.SET_ERROR="SET_ERROR",e.SET_USER="SET_USER",e.SET_IS_LOADING="SET_IS_LOADING"}(r||(r={}));var I,T=n(162),w=n(163),N=n(164),D=n.n(N),A=function(){function e(){Object(T.a)(this,e)}return Object(w.a)(e,null,[{key:"getUsers",value:function(){var e=Object(_.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.a.get("./user.json"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),W={setIsAuth:function(e){return{type:r.SET_AUTH,payload:e}},setUser:function(e){return{type:r.SET_USER,payload:e}},setIsLoading:function(e){return{type:r.SET_IS_LOADING,payload:e}},setError:function(e){return{type:r.SET_ERROR,payload:e}},login:function(e,t){return function(){var n=Object(_.a)(y.a.mark((function n(r){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{r(W.setIsLoading(!0)),setTimeout(Object(_.a)(y.a.mark((function n(){var a,c;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,A.getUsers();case 2:a=n.sent,(c=a.data.find((function(n){return n.username===e&&n.password===t})))?(localStorage.setItem("auth","true"),localStorage.setItem("username",c.username),localStorage.setItem("password",c.password),r(W.setUser(c)),r(W.setIsAuth(!0)),r(W.setError(""))):r(W.setError("Failed correctly fill user or password")),r(W.setIsLoading(!1));case 6:case"end":return n.stop()}}),n)}))),1e3)}catch(a){r(W.setError("We have Error during login"))}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(_.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{localStorage.removeItem("auth"),localStorage.removeItem("username"),localStorage.removeItem("password"),t(W.setIsAuth(!1)),t(W.setUser({})),t(W.setError(""))}catch(n){t(W.setError("We have Problem with LogOut"))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}};!function(e){e.SET_GUESTS="SET_GUESTS",e.SET_EVENTS="SET_EVENTS",e.DELETE_EVENT="DELETE_EVENT"}(I||(I={}));var L,C={setGuests:function(e){return{type:I.SET_GUESTS,payload:e}},setEvents:function(e){return{type:I.SET_EVENTS,payload:e}},fetchGuest:function(){return function(){var e=Object(_.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.getUsers();case 3:n=e.sent,t(C.setGuests(n.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error in EventActionCreator",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},createEvent:function(e){return function(){var t=Object(_.a)(y.a.mark((function t(n){var r,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=localStorage.getItem("events")||"[]",(a=JSON.parse(r)).push(e),n(C.setEvents(a)),localStorage.setItem("events",JSON.stringify(a))}catch(c){console.log(c)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fetchEvents:function(e){return function(){var t=Object(_.a)(y.a.mark((function t(n){var r,a,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=localStorage.getItem("events")||"[]",a=JSON.parse(r),c=a.filter((function(t){return t.author===e||t.guest===e})),n(C.setEvents(c))}catch(o){console.log("Error in fetchEvents",o)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},editEvent:function(e){return function(){var t=Object(_.a)(y.a.mark((function t(n){var r,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=localStorage.getItem("events")||"[]",(a=JSON.parse(r)).map((function(t){return t.id===e.id&&(t.author=e.author,t.date=e.date,t.description=e.description,t.guest=e.guest),t})),n(C.setEvents(a)),localStorage.setItem("events",JSON.stringify(a))}catch(c){console.log(c)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},deleteEvent:function(e){return function(){var t=Object(_.a)(y.a.mark((function t(n){var r,a,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{console.log("DELETe",e),r=localStorage.getItem("events")||"[]",a=JSON.parse(r),c=a.filter((function(t){return t.id!==e})),n(C.setEvents(c)),localStorage.setItem("events",JSON.stringify(c))}catch(o){console.log(o)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}};!function(e){e.OPEN_MODAL_WINDOW="OPEN_MODAL_WINDOW",e.OPEN_MODAL_WINDOW_WITH_DATA="OPEN_MODAL_WINDOW_WITH_DATA",e.CLOSE_MODAL_WINDOW="CLOSE_MODAL_WINDOW"}(L||(L={}));var M,U={openModalWindow:function(e){return{type:L.OPEN_MODAL_WINDOW}},openModalWindowWithData:function(e){return{type:L.OPEN_MODAL_WINDOW_WITH_DATA,payload:e}},closeModalWindow:function(){return{type:L.CLOSE_MODAL_WINDOW}}},k=Object(x.a)(Object(x.a)(Object(x.a)({},W),C),U),R=function(){var e=Object(E.b)();return Object(g.b)(k,e)},G=n(91),P=n(7),V=function(){var e=m((function(e){return e.auth})),t=e.error,n=e.isLoading,r=R().login,c=Object(a.useState)(""),o=Object(l.a)(c,2),s=o[0],u=o[1],i=Object(a.useState)(""),f=Object(l.a)(i,2),h=f[0],v=f[1];return Object(P.jsxs)(d.a,{title:"Login",bordered:!1,style:{width:400},children:[Object(P.jsx)(G.a,{description:"Choose one of the users [user - password]:"}),Object(P.jsx)(G.a,{style:{marginBottom:10},description:"admin - a123, olha - o123, user1 - u123"}),Object(P.jsxs)(j.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:function(){r(s,h)},autoComplete:"off",children:[t&&Object(P.jsx)("div",{style:{color:"red"},children:t}),Object(P.jsx)(j.a.Item,{label:"Username",name:"username",rules:[b("Please input your username")],children:Object(P.jsx)(O.a,{value:s,onChange:function(e){return u(e.target.value)}})}),Object(P.jsx)(j.a.Item,{label:"Password",name:"password",rules:[b("Please input your password")],children:Object(P.jsx)(O.a.Password,{value:h,onChange:function(e){return v(e.target.value)}})}),Object(P.jsx)(j.a.Item,{wrapperCol:{offset:8,span:16},children:Object(P.jsx)(p.a,{loading:n,type:"primary",htmlType:"submit",children:"Submit"})})]})]})},J=function(){return Object(P.jsx)(u.a,{children:Object(P.jsx)(i.a,{justify:"center",align:"middle",className:"h100",children:Object(P.jsx)(V,{})})})},H=n(297),F=function(e){var t=e.getFullYear(),n=e.getMonth()<10?"0".concat(e.getMonth()+1):e.getMonth(),r=e.getDate()<10?"0".concat(e.getDate()):e.getDate();return"".concat(t,"/").concat(n,"/").concat(r)},Y=(n(158),function(e){var t=e.events,n=R().openModalWindowWithData;return Object(P.jsx)(H.a,{fullscreen:!0,dateCellRender:function(e){var r=F(e.toDate()),a=t.filter((function(e){return e.date===r}));return Object(P.jsx)("div",{className:"events",children:a.map((function(e,t){var r="".concat(e.guest||e.author,": ").concat(e.description);return Object(P.jsx)("div",{title:r,onClick:function(){return n(e)},children:e.description},t)}))})}})}),z=n(298),B=n(295),q=n(137),K={id:"",author:"",guest:"",date:F(h()().toDate()),description:""},Q=function(){var e=R(),t=e.createEvent,n=e.editEvent,r=e.deleteEvent,c=e.closeModalWindow,o=e.fetchEvents,s=m((function(e){return e.auth})).user,u=m((function(e){return e.modalWindow})).data,d=m((function(e){return e.event})).guests,f=Object(a.useState)(K),E=Object(l.a)(f,2),g=E[0],S=E[1],y=Object(a.useState)(!1),_=Object(l.a)(y,2),I=_[0],T=_[1],w="YYYY/MM/DD";Object(a.useEffect)((function(){o(s.username),u.author?(S(Object(x.a)(Object(x.a)({},g),{},{id:u.id,author:u.author,guest:u.guest,date:u.date,description:u.description})),T(!0)):(S(Object(x.a)(Object(x.a)({},g),K)),T(!1))}),[u]);return Object(P.jsxs)(j.a,{onFinish:function(){I?n(g):t(Object(x.a)(Object(x.a)({},g),{},{id:"id-".concat(Number(Date.now().toString()),"-").concat(g.description.replaceAll(" ","")),author:s.username})),c()},children:[Object(P.jsx)(j.a.Item,{label:"Description",children:Object(P.jsx)(O.a,{name:"descriptionValue",value:g.description,onChange:function(e){return S(Object(x.a)(Object(x.a)({},g),{},{description:e.target.value}))}})}),Object(P.jsx)(j.a.Item,{label:"Date",rules:[v("You can't create event in past")],children:Object(P.jsx)(B.a,{value:h()(g.date,w),format:w,onChange:function(e){var t;(t=e)&&S(Object(x.a)(Object(x.a)({},g),{},{date:F(t.toDate())}))}})}),Object(P.jsx)(j.a.Item,{label:"Guest",rules:[b()],children:Object(P.jsx)(q.a,{value:g.guest||g.author,onChange:function(e){return S(Object(x.a)(Object(x.a)({},g),{},{guest:e}))},children:d.map((function(e){return Object(P.jsx)(q.a.Option,{value:e.username,children:e.username},e.username)}))})}),Object(P.jsx)(i.a,{justify:"end",children:Object(P.jsxs)(j.a.Item,{children:[I&&Object(P.jsx)(p.a,{style:{marginRight:"10px"},type:"default",htmlType:"button",onClick:function(){r(g.id),c()},children:"Delete"}),Object(P.jsx)(p.a,{type:"primary",htmlType:"submit",children:I?"Edit":"Create"})]})})]})},X=function(e){var t=e.title,n=m((function(e){return e.modalWindow})),r=n.open,a=n.data,c=R().closeModalWindow,o=a.hasOwnProperty("author");return Object(P.jsx)("div",{children:Object(P.jsx)(z.a,{title:o?"Edit event":t,visible:r,onCancel:function(){return c()},footer:null,children:Object(P.jsx)(Q,{})})})},Z=function(){var e=R(),t=e.fetchGuest,n=e.fetchEvents,r=e.openModalWindow,c=m((function(e){return e.event})).events,o=m((function(e){return e.auth})).user;return Object(a.useEffect)((function(){t(),n(o.username)}),[]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(Y,{events:c}),Object(P.jsx)(i.a,{justify:"center",children:Object(P.jsx)(p.a,{onClick:function(){return r(!0)},children:"Add event"})}),Object(P.jsx)(X,{title:"Add event"})]})};!function(e){e.LOGIN="/login",e.EVENT="/"}(M||(M={}));var $=[{path:M.LOGIN,exact:!0,component:J}],ee=[{path:M.EVENT,exact:!0,component:Z}],te=function(){return m((function(e){return e.auth})).isAuth?Object(P.jsxs)(s.d,{children:[ee.map((function(e){return Object(P.jsx)(s.b,{path:e.path,exact:e.exact,component:e.component},e.path)})),Object(P.jsx)(s.a,{to:M.EVENT})]}):Object(P.jsxs)(s.d,{children:[$.map((function(e){return Object(P.jsx)(s.b,{path:e.path,exact:e.exact,component:e.component},e.path)})),Object(P.jsx)(s.a,{to:M.LOGIN})]})},ne=n(45),re=n(299),ae=function(){var e=Object(s.g)(),t=R().logout,n=m((function(e){return e.auth})),r=n.user,a=n.isAuth;return Object(P.jsx)(ne.c,{children:Object(P.jsxs)(i.a,{justify:"end",children:[Object(P.jsx)("div",{className:"logo"}),a?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{style:{color:"white"},children:r.username}),Object(P.jsx)(re.a,{theme:"dark",mode:"horizontal",selectable:!1,children:Object(P.jsx)(re.a.Item,{onClick:t,children:"Out"},1)})]}):Object(P.jsx)(re.a,{theme:"dark",mode:"horizontal",selectable:!1,children:Object(P.jsx)(re.a.Item,{onClick:function(){return e.push(M.LOGIN)},children:"Login Now"},1)})]})})},ce=function(){var e=R(),t=e.setUser,n=e.setIsAuth;return Object(a.useEffect)((function(){localStorage.getItem("auth")&&(t({username:localStorage.getItem("username")}),n(!0))})),Object(P.jsxs)(u.a,{className:"layout",children:[Object(P.jsx)(ae,{}),Object(P.jsx)(ne.a,{style:{padding:"50px"},children:Object(P.jsx)("div",{className:"site-layout-content",children:Object(P.jsx)(te,{})})}),Object(P.jsx)(ne.b,{style:{textAlign:"center"},children:"2021 Created by Ant UED"})]})},oe=n(101),se=n(170),ue={isAuth:!1,user:{},isLoading:!1,error:""};var ie={events:[],guests:[]};var le={open:!1,data:{}};var de={auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_AUTH:return Object(x.a)(Object(x.a)({},e),{},{isAuth:t.payload,isLoading:!1});case r.SET_USER:return Object(x.a)(Object(x.a)({},e),{},{user:t.payload});case r.SET_IS_LOADING:return Object(x.a)(Object(x.a)({},e),{},{isLoading:t.payload});case r.SET_ERROR:return Object(x.a)(Object(x.a)({},e),{},{error:t.payload,isLoading:!1});default:return e}},event:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.SET_GUESTS:return Object(x.a)(Object(x.a)({},e),{},{guests:t.payload});case I.SET_EVENTS:case I.DELETE_EVENT:return Object(x.a)(Object(x.a)({},e),{},{events:t.payload});default:return e}},modalWindow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L.CLOSE_MODAL_WINDOW:return Object(x.a)(Object(x.a)({},e),{},{open:!1,data:{}});case L.OPEN_MODAL_WINDOW:return Object(x.a)(Object(x.a)({},e),{},{open:!0,data:{}});case L.OPEN_MODAL_WINDOW_WITH_DATA:return Object(x.a)(Object(x.a)({},e),{},{open:!0,data:t.payload});default:return e}}},je=Object(g.c)(de),Oe=Object(g.d)(je,Object(g.a)(se.a));o.a.render(Object(P.jsx)(E.a,{store:Oe,children:Object(P.jsx)(oe.a,{children:Object(P.jsx)(ce,{})})}),document.getElementById("root"))}},[[289,1,2]]]);
//# sourceMappingURL=main.f9d3aa7b.chunk.js.map